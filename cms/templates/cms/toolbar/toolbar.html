{% load i18n adminmedia sekizai_tags cms_js_tags cms_admin %}
{% addtoblock "js" %}
<script type="text/javascript">
	var _jQuery = window.jQuery || null;
	var _$ = window.$ || null;
</script>
{% endaddtoblock %}
{% addtoblock "js" %}<script type="text/javascript" src="{% admin_static_url %}js/jquery.min.js"></script>{% endaddtoblock %}
{% addtoblock "js" %}<script type="text/javascript" src="{{ STATIC_URL }}cms/js/libs/class.min.js"></script>{% endaddtoblock %}
{% addtoblock "js" %}<script type="text/javascript" src="{{ STATIC_URL }}cms/js/plugins/cms.base.js"></script>{% endaddtoblock %}
{% addtoblock "js" %}<script type="text/javascript" src="{{ STATIC_URL }}cms/js/plugins/cms.toolbar.js"></script>{% endaddtoblock %}
{% addtoblock "js" %}<script type="text/javascript" src="{{ STATIC_URL }}cms/js/plugins/cms.placeholders.js"></script>{% endaddtoblock %}

{% addtoblock "css" %}<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}cms/css/plugins/cms.toolbar.css?v1" media="all" />{% endaddtoblock %}
{% addtoblock "css" %}<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}cms/css/plugins/cms.placeholders.css?v1" media="all" />{% endaddtoblock %}
{% addtoblock "js" %}
<script type="text/javascript">
CMS.$(document).ready(function () {
	// initialize toolbar and pass required options
	new CMS.Toolbar('#cms_toolbar', {
		'debug': true,
		'edit_mode': {{ request.toolbar.edit_mode|bool }},
		'settings': {
			'toolbar': 'expanded',
			'csrf': '{{ csrf_token }}'
		},
		'lang': {
			'move_warning': {% javascript_string %}{% trans "The selected element can not be moved to the desired location." %}{% end_javascript_string %},
			'delete_request': {% javascript_string %}{% trans "Are you sure you want to delete this plugin?" %}{% end_javascript_string %},
			'cancel': {% javascript_string %}{% trans "Cancel" %}{% end_javascript_string %}
		}
	});
});
</script>
{% endaddtoblock %}
{% addtoblock "js" %}
<script type="text/javascript">
	window.jQuery = _jQuery || jQuery;
	window.$ = _$ || jQuery;
</script>
{% endaddtoblock %}
<div id="cms_toolbar" class="cms_reset cms_light{% if not user.is_authenticated %} cms_toolbar-auth{% endif %}">
	<!-- start: toolbar -->
	<div class="cms_toolbar">
		<div class="cms_toolbar-left">
			<div class="cms_toolbar-item cms_toolbar-item_logo"><a href="/">{% trans "django CMS" %}</a></div>

			{% if not user.is_authenticated %}
			<form class="cms_toolbar-item cms_form-login" method="post" action="?cms-toolbar-login=1">
				{% csrf_token %}
				<label>{% trans "Username" %} <input type="text" name="cms_username" /></label>
				<label class="cms_error">{% trans "Password" %} <input type="password" name="cms_password" /></label>
				<label><input type="submit" value="Login" /></label>
			</form>
			{% endif %}

			<ul class="cms_toolbar-item cms_toolbar-item_navigation">
				<li>
					<a href="{% url admin:index %}">{% trans "Admin" %}</a>
					<ul>
						<li><a href="{% url admin:index %}" rel="sideframe">{% trans "Administration" %}</a></li>
						<li><a href="{% url admin:cms_page_changelist %}" rel="sideframe">{% trans "Pages" %}</a></li>
						<li><a href="{% url admin:auth_user_changelist %}" rel="sideframe">{% trans "Users" %}</a></li>
						<li class="cms_toolbar-item_navigation-break">-----</li>
						<li><a href="{% url admin:logout %}" rel="ajax"><strong>{% trans "Logout" %}</strong></a></li>
					</ul>
				</li>
				<li>
					<a href="{% url admin:cms_page_change current_page.pk %}">{% trans "Page" %}</a>
					<ul>
						<li><a href="{% url admin:cms_page_change current_page.pk %}" rel="sideframe">{% trans "Edit settings" %}</a></li>
						<li><a href="{% url admin:cms_page_delete current_page.pk %}" rel="sideframe">{% trans "Delete page" %}</a></li>
					</ul>
				</li>
				<li>
					<a href="{% url admin:cms_page_change current_page.pk %}">{% trans "Template" %}</a>
					<ul>
						{% for template in templates %}
						<li><span>{% trans "No templates defined" %}</span></li>
						{% empty %}
						<li class="active"><a href="{% url admin:cms_page_change_template current_page.pk %}?template=col_two.html" rel="ajax">two columns</a></li>
						<li><a href="{% url admin:cms_page_change_template current_page.pk %}?template=col_three.html" rel="ajax">three columns</a></li>
						<li><a href="{% url admin:cms_page_change_template current_page.pk %}?template=nav_playground.html" rel="ajax">navigation examples</a></li>
						<li class="cms_toolbar-item_navigation-break">-----</li>
						<li><a href="{% url admin:cms_page_change_template current_page.pk %}?template=INHERIT" rel="ajax">Inherit from nearest ancestor</a></li>
						{% endfor %}
					</ul>
				</li>
				<li{% if not request.toolbar.edit_mode %} class="cms_toolbar-item_navigation-disabled"{% endif %}>
					<a href="{% url admin:cms_page_change current_page.pk %}">{% trans "Publish" %}</a>
					<ul>
						<li><a href="{% url admin:cms_page_publish_page current_page.pk %}" rel="ajax">{% trans "Publish now" %}</a></li>
						<li><a href="{% url admin:cms_page_remove_delete_state current_page.pk %}" data-text="{% trans "Are you sure you want to revert to live?" %}" rel="dialogue">{% trans "Revert to live" %}</a></li>
					</ul>
				</li>
			</ul>
		</div>

		<div class="cms_toolbar-right">
			{% if request.toolbar.edit_mode %}
			<ul class="cms_toolbar-item cms_toolbar-item_buttons">
				<li{% if request.toolbar.edit_mode %} class="active"{% endif %}><a href="?edit=true">{% trans "Edit" %}</a></li>
				<li><a href="?layout=true">{% trans "Layout" %}</a></li>
				<li{% if not request.toolbar.edit_mode %} class="active"{% endif %}><a href="?view=true">{% trans "View" %}</a></li>
			</ul>
			{% endif %}
			<div class="cms_toolbar-item cms_toolbar-item_switch{% if not request.toolbar.edit_mode %} cms_toolbar-item_switch-active{% endif %}">
				<!--
					TODO: URL STYLE:
						draft=on / draft=off triggers buttons
						edit=on / edit=off triggers edit mode
						layout=on / layout=off triggers layout mode
						view=on / view=off triggers view mode
				-->
				<a href="{% if request.toolbar.edit_mode %}?edit_off{% else %}?edit{% endif %}">
					<span class="cms_toolbar-item_switch-on">{% trans "Live" %}</span>
					<span class="cms_toolbar-item_switch-off">{% trans "Draft" %}</span>
				</a>
				<span class="cms_toolbar-item_switch-knob">{% trans "Change" %}</span>
			</div>
		</div>
	</div>
	<div class="cms_toolbar-trigger"><a href="#">{% trans "Toggle toolbar" %}</a></div>
	<!-- end: toolbar -->

	<!-- start: sidebar -->
	<div class="cms_sideframe">
		<div class="cms_sideframe-resize"><span class="cms_sideframe-knob"></span></div>
		<div class="cms_sideframe-frame"></div>
		<div class="cms_sideframe-shim"></div>
	</div>
	<!-- end: sidebar -->

	<!-- start: dialogue -->
	<div class="cms_dialogue">
		<div class="cms_dialogue-title">{% trans "Notification" %}</div>
		<div class="cms_dialogue-inner">
			<div class="cms_dialogue-text"></div>
			<div class="cms_dialogue-buttons">
				<a href="#" class="cms_dialogue-cancel">{% trans "No" %}</a>
				<a href="#" class="cms_dialogue-confirm">{% trans "Yes" %}</a>
				<a href="#" class="cms_dialogue-accept">{% trans "Ok" %}</a>
			</div>
		</div>
	</div>
	<!-- end: dialogue -->

	<!-- start: modal -->
	<div class="cms_modal">
		<div class="cms_modal-head">
			<span class="cms_modal-title">&nbsp;</span>
			<span class="cms_modal-collapse" title="minimize">-</span>
			<span class="cms_modal-close" title="close">x</span>
		</div>
		<div class="cms_modal-body">
			<div class="cms_modal-shim"></div>
			<div class="cms_modal-frame"></div>
		</div>
		<div class="cms_modal-foot">
			<div class="cms_modal-breadcrumb">
				<span class="cms_modal-breadcrumb-title">Plugin Tree</span>
				<span class="cms_modal-breadcrumb-items">&nbsp;</span>
			</div>
			<div class="cms_modal-resize"></div>
		</div>
	</div>
	<!-- end: modal -->

	<!-- start: placeholder -->
	<div class="cms_placeholders-tooltip"><span class="iconic pen_alt_fill"></span>Double-click to edit</div>
	<!-- end: placeholder -->
</div>