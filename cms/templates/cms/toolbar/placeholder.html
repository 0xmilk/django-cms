{% load i18n sekizai_tags %}
{% addtoblock "js" %}
<script type="text/javascript">
CMS.$(document).ready(function () {
	new CMS.Placeholder('#cms_placeholder-bar-{{ placeholder.pk }}', {
		'type': 'bar',
		'page_id': '{{ page.id }}',
		'page_language': '{{ language }}',
		'placeholder_id': '{{ placeholder.pk }}',
		'slot': {{ placeholder.slot }},
		'urls': {
			'add_plugin': '{{ placeholder.get_add_url }}',
			'change_list': '{{ placeholder.get_changelist_url }}'
		}
	});
});
</script>
{% endaddtoblock %}
<div id="cms_placeholder-bar-{{ placeholder.pk }}" class="cms_reset cms_placeholder-bar">
	<div class="cms_placeholder-title">{{ placeholder_label }}</div>
	<div class="cms_placeholder-btn">
		<a href="#">{% trans "Add" %}</a>
		<ul class="cms_placeholder-subnav">
			{% regroup installed_plugins by module as module_list %}
			{% for module in module_list %}
			<li class="cms_placeholder-subnav-title"><span>{% if module.grouper %}{{ module.grouper|capfirst }}{% else %}{% trans "Available plugins" %}{% endif %}</span>
				<ul>
					{% for p in module.list %}
					<li{% if forloop.first %} class="cms_placeholder-first"{% endif %}{% if forloop.last %} class="cms_placeholder-last"{% endif %}><a href="#" rel="{{ p.value }}">{{ p.name }}</a></li>
					{% endfor %}
				</ul>
			</li>
			{% endfor %}
		</ul>
	</div>
</div>